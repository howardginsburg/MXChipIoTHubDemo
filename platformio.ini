; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html
;
; Build a specific profile:
;   pio run -e iothub_sas
;   pio run -e iothub_cert
;   pio run -e dps_sas
;   pio run -e dps_sas_group
;   pio run -e dps_cert

; ===== Shared settings for all environments =====
[env]
platform = ststm32
board = mxchip_az3166
framework = arduino
monitor_speed = 115200
platform_packages =
    framework-arduinostm32mxchip@https://github.com/howardginsburg/framework-arduinostm32mxchip.git

; ===== IoT Hub direct connection with SAS token =====
[env:iothub_sas]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_IOTHUB_SAS

; ===== IoT Hub direct connection with X.509 certificate =====
[env:iothub_cert]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_IOTHUB_CERT

; ===== DPS with symmetric key (individual enrollment) =====
; For group enrollment, use the dps_sas_group environment instead
[env:dps_sas]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_DPS_SAS

; ===== DPS with symmetric key (group enrollment) =====
[env:dps_sas_group]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_DPS_SAS_GROUP

; ===== DPS with X.509 certificate =====
[env:dps_cert]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_DPS_CERT